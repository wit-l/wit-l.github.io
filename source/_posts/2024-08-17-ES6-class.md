---
title: ES6+中的class
tags:
  - Js
  - ES6+
  - class
categories:
  - JavaScript基础
description: 本文主要记录ES6+中class的用法
abbrlink: 886fba1d
date: 2024-08-17 17:49:29
cover: https://tuchuang.voooe.cn/images/2024/08/17/one_room3c_1920x1080.webp
---

## 实例成员

&nbsp;&nbsp;&nbsp;&nbsp;由于传统构造函数和ES6+中class的差异，在两种情况下实例成员所包含的内容稍有不同。
&nbsp;&nbsp;&nbsp;&nbsp;相同部分：

- 在构造函数内通过`this`定义的属性和方法（每个实例独有）。

&nbsp;&nbsp;&nbsp;&nbsp;class中新增的部分：

- 在class内{% nota 直接定义的属性,与在构造函数中用this定义的相同，每个实例独有 %}和{% nota 方法,位于prototype上的方法，所有实例共享 %}。

### 实例属性

&nbsp;&nbsp;&nbsp;&nbsp;在类中直接定义的属性位于实例对象上，属于实例属性；但是通常不在类中定义属性，而是直接在构造函数中使用this定义后根据传入参数初始化。

```JavaScript
class User {
  // 若在构造函数中进行初始化，则会覆盖默认值
  // 公有实例属性
  name = "default name";
  // 私有实例属性，只能在类内访问
  #id = "default id";
  constructor(name, id) {
    // this.name/#id等于上面类中的name/#id
    this.name = name;
    this.#id = id;
  }
}
```

{% note warning flat %}
class创建类为ES6+新增功能;
在class中直接定义（私有/共有）实例属性（字段）以及为其初始化默认值操作均为ES13(2022)+新增功能。
若在类中定义时初始化为默认值的变量在构造函数中也进行了赋值操作，则默认值会被覆盖，即使不传入参数！
{% endnote %}

### 实例方法

&nbsp;&nbsp;&nbsp;&nbsp;实例方法包括：

1. 使用this在{% nota constructor中定义的方法 ,实例对象上的方法，每个实例独有 %}。
2. 在class中{% nota 直接定义的方法 ,原型上的方法，位于实例的__proto__即类的prototype上，为所有实例共享 %}。

&nbsp;&nbsp;&nbsp;&nbsp;虽然从技术上说，后者属于原型成员，但在{% nota OOP ,Object-Oriented Programming %}的语义中，它们被称为实例方法，因为它们与实例的交互有关。

```JavaScript
class User {
  constructor() {
    // 此为实例本身的方法（每个实例独有）
    this.instanceMethod1() {}
  }
  // 私有方法，只能在类内访问
  #privateMethod() {
    console.log('this is private')
  }
  // 此为"原型上的公有实例方法（共享）"
  // ES6+推荐写法
  getPrivateMessage() {
    return this.#privateMethod();
  }
}
```

{%note warning flat %}
class中定义公有实例方法和class一样为ES6+新特性。
class中定义私有方法为ES13+中的新特性，通过在方法名前加`#`符号来定义，只能在类内部访问。
{% endnote %}

## 静态成员

&nbsp;&nbsp;&nbsp;&nbsp;定义在类上的属性和方法称为静态成员。定义方式如下：

```JavaScript
class User {
  // 公有
  static number = "default value";
  static staticMethod() {
    return this.#privateStaticMethod();
  }
  // 私有
  static #privateStaticField = '...';
  static #privateStaticMethod() {
    return "This is a private static method";
  }
}
```

{%note warning flat %}
在class中定义（公有/私有）静态字段为ES13+中新增特性。
{% endnote %}
