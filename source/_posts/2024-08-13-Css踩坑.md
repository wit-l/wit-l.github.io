---
title: Css踩坑
tags:
  - css
  - 踩坑
categories:
  - Css基础
abbrlink: f844bed2
date: 2024-08-13 21:37:00
description: 本文主要收集Css中隐藏的坑
sticky: 2
swiper_index: 2
cover: https://tuchuang.voooe.cn/images/2024/08/17/qingyinshaonv_1920x1080.webp
---

# 关于img元素

## 1. img元素不支持伪元素

&nbsp;&nbsp;&nbsp;&nbsp;before/after伪元素分别位于所属元素内部的开头和末尾，所以只有内部可以存放元素的标签————双标签才能添加伪元素。

## 2. 默认情况下，flex-grow/shrink无法在img元素上生效

&nbsp;&nbsp;&nbsp;&nbsp;浏览器默认为img添加的用户代理样式表（user agent stylesheet）包含如下属性值`overflow:clip;overflow-clip-margin:content-box`，如下图所示：
![user agent stylesheet](https://cdn.jsdelivr.net/gh/wit-l/filebed@main/images/17235612150841723561152164.png)
&nbsp;&nbsp;&nbsp;&nbsp;经测试发现，主要是受到`overflow:clip`的影响，这意味着图片的显示被限制在其固有尺寸内，不会超出边界显示。这会导致以下情况：

- 限制尺寸增长/缩小：即使在 Flex 容器中设置了 `flex-grow/shrink`，由于 `overflow: clip` 的存在，img 元素可能不会更改其固有尺寸。

- 影响尺寸计算：`overflow: clip` 可能导致浏览器在计算元素的可用空间时，将其视为固定尺寸的元素，进而忽略 `flex-grow/shrink` 的设置。

&nbsp;&nbsp;&nbsp;&nbsp;解决方法有以下两种：

- 覆盖默认的 overflow 样式：将 img 元素的 overflow 属性设置为 visible 或 inherit，允许其内容超出边界显示，从而使 flex-grow 能够正常工作。
- 设置最小宽度：显式地将 img 元素的 min-width 设置为 0，确保其可以缩小或放大。

&nbsp;&nbsp;&nbsp;&nbsp;经测试发现，同样在div上添加该属性时并不会和img那样阻止flex-grow/shrink生效（即使未为div添加任何带width、heigh的属性，仅仅靠内容撑大div），div仍然能正常按照flex-grow/shrink设定的规则进行合理地缩放。
